{"ast":null,"code":"var _jsxFileName = \"/Users/yashwadhwani/Downloads/new ui/hdfc-call-vault/src/pages/download_call_records.jsx\";\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport DatePicker from 'react-datepicker';\nimport Dropdown from '../components/common/download_call_dropdown';\nimport Textbox from '../components/common/download_call_textbox';\nimport Loader from '../components/common/loader';\nimport calenderImage from '../images/Icon metro-calendar.png';\nimport '../stylesheets/download_call_records.css';\nimport callRecordAjax from '../utils/callRecordAjax';\nimport CONSTANTS from '../utils/constants';\nimport handle_error from '../utils/handle';\nimport userAjax from '../utils/userAjax';\nimport Play from \"./../images/Icon ionic-ios-play-circle.svg\";\nimport searchIcon from './../images/search-3-64.png';\nconst Download_call_records = () => {\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState([]);\n  const today = new Date();\n  const [startDate, setStartDate] = useState(today);\n  const [endDate, setEndDate] = useState(moment(today).add(7, 'days').toDate());\n  const [maxEndDate, setMaxEndDate] = useState(moment().add(7, 'days').toDate());\n  const [limit] = useState(10);\n  const [hasNext, setHasNext] = useState(false);\n  const [nextOffset, setNextOffset] = useState(null);\n  const [offsetHistory, setOffsetHistory] = useState([0]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [mobileno, setMobileNo] = useState('');\n  const [applicationnumber, setApplicationNumber] = useState('');\n  const [policynumbers, setPolicyNumbers] = useState('');\n  const [callCenterDDData, setCallCenterDDData] = useState([]);\n  const [callCenter, setCallCenter] = useState('');\n  const [addMobile, setAddMobile] = useState('');\n  const [addapplication, setAddApplication] = useState('');\n  const [addPolicy, setAddPolicy] = useState('');\n  const [isFetching, setIsFetching] = useState(false);\n\n  // ------------------ API Calls ------------------\n  // Now accepts optional overrides for start/end dates so callers can ensure\n  // the API uses the exact dates the user selected (avoids stale-setState race).\n  const fetchCallRecords = async (offsetParam = 0, startOverride = null, endOverride = null) => {\n    if (isFetching) return;\n    setIsFetching(true);\n    setLoading(true);\n    const sDate = startOverride || startDate;\n    const eDate = endOverride || endDate;\n    const startD = sDate ? moment(sDate).format('YYYY-MM-DD') : null;\n    const endD = eDate ? moment(eDate).format('YYYY-MM-DD') : null;\n    const response = await callRecordAjax(CONSTANTS.API_METHODS.GET, `${CONSTANTS.API.GET_PHONECALL_RECORDS}/${mobileno || 0}/${policynumbers || null}/${applicationnumber || null}/${localStorage.getItem('IS_ADMIN')}/${null}/${localStorage.getItem('USER_ID')}/${startD}/${endD}/${limit}/${offsetParam}/callStartDate/desc`, {}, {\n      id: localStorage.getItem('USER_ID')\n    }, {});\n    if (response.status === CONSTANTS.STATUS.OK) {\n      setData([...response.data]);\n      setHasNext(response.hasNext || false);\n      setNextOffset(response.nextOffset || null);\n    } else {\n      setData([]);\n      setHasNext(false);\n      setNextOffset(null);\n    }\n    setLoading(false);\n    setIsFetching(false);\n  };\n\n  // ------------------ Pagination ------------------\n  const searchOnClick = async () => {\n    setOffsetHistory([0]);\n    setCurrentPage(1);\n    setHasNext(false);\n    setNextOffset(null);\n    await fetchCallRecords(0);\n  };\n  const onNextClick = async () => {\n    if (isFetching) return;\n    if (!hasNext || !nextOffset) return;\n    await fetchCallRecords(nextOffset);\n    setOffsetHistory(prev => [...prev, nextOffset]);\n    setCurrentPage(prev => prev + 1);\n  };\n  const onPreviousClick = async () => {\n    if (isFetching) return;\n    if (offsetHistory.length <= 1) return;\n    const newHistory = [...offsetHistory];\n    newHistory.pop();\n    const previousOffset = newHistory[newHistory.length - 1];\n    await fetchCallRecords(previousOffset);\n    setOffsetHistory(() => newHistory);\n    setCurrentPage(prev => prev - 1);\n  };\n\n  // ------------------ Dates ------------------\n  const handleStartDateChange = date => {\n    // When start changes: set start, compute new maxEnd and default end\n    setStartDate(date);\n    const newMax = moment(date).add(7, 'days').toDate();\n    setMaxEndDate(newMax);\n\n    // If current endDate is before startDate or after newMax, reset it\n    if (!endDate || moment(endDate).isBefore(moment(date)) || moment(endDate).isAfter(moment(newMax))) {\n      const defaultEnd = newMax;\n      setEndDate(defaultEnd);\n      // Do NOT auto-run the API here — wait for user to pick end or click search.\n    }\n  };\n\n  // Important: use the selected `date` directly when calling the API to avoid\n  // race conditions where setState hasn't updated yet. We call fetchCallRecords\n  // with overrides so the API uses the exact selection the user made.\n  const handleEndDateChange = async date => {\n    setEndDate(date);\n    // Immediately run search using current startDate and the newly selected end date.\n    await fetchCallRecords(0, startDate, date);\n  };\n\n  // ------------------ Download ------------------\n  const DownloadRecording = async item => {\n    const params = {\n      bucketName: item.s3RecordingBucketName,\n      key: item.s3RecordingFilePath\n    };\n    const response = await callRecordAjax(CONSTANTS.API_METHODS.GET, CONSTANTS.API.DOWNLOAD_FILE, params, {\n      id: localStorage.getItem('USER_ID')\n    }, {});\n    if (response.status === CONSTANTS.STATUS.OK) {\n      startDownload(response.data[0], item);\n    }\n  };\n  const startDownload = async (url, fileName) => {\n    const response = await fetch(url);\n    const blob = await response.blob();\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = fileName.recordingFileName;\n    link.click();\n  };\n\n  // ------------------ Effects ------------------\n  useEffect(() => {\n    // getCallCenterDropDownData();\n    fetchCallRecords(0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // ------------------ Table ------------------\n  const renderTableRows = () => data.map(item => /*#__PURE__*/React.createElement(\"tr\", {\n    key: item.callId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, item.groupName), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, item.callId), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, item.recordingFileName), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, item.calledNumber), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, item.applicationNo), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, item.policyNumber), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, item.callStartDate, \" \", item.callStartTime), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, item.callENDDate, \" \", item.callENDTime), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-data-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"play pl-2\",\n    onClick: () => DownloadRecording(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, \"Recording\", /*#__PURE__*/React.createElement(\"img\", {\n    className: \"ml-1 playbutton\",\n    src: Play,\n    alt: \"Play\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }))))));\n  const renderTable = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-bordered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"tablehead\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, \"Call Center\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, \"Call Id\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, \"File Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, \"Mobile No.\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }, \"Application Number\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, \"Policy Number\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, \"Start Date & Time\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, \"End Date & Time\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-head\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, \"Recordings\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }\n  }, renderTableRows())), !loading && (data === null || data === void 0 ? void 0 : data.length) === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, \"No data found\"));\n\n  // ------------------ JSX ------------------\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `content ${loading ? 'loading-blur' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 5\n    }\n  }, loading && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"centre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"headertag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 36\n    }\n  }, \"Download Call Records\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"headerline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Textbox, {\n    type: \"number\",\n    styleClass: \"download-records-textbox\",\n    placeholder: \"Mobile No.\",\n    value: addMobile,\n    onChange: e => {\n      setMobileNo(e.target.value);\n      setAddMobile(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Textbox, {\n    type: \"number\",\n    styleClass: \"download-records-textbox\",\n    placeholder: \"Application No.\",\n    value: addapplication,\n    onChange: e => {\n      setApplicationNumber(e.target.value);\n      setAddApplication(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Textbox, {\n    type: \"number\",\n    styleClass: \"download-records-textbox\",\n    placeholder: \"Policy No.\",\n    value: addPolicy,\n    onChange: e => {\n      setPolicyNumbers(e.target.value);\n      setAddPolicy(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '220px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filterContainer-dc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filterAppointmentStart d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    className: \"datePicker-Input\",\n    placeholderText: \"Start Date\",\n    selected: startDate,\n    onChange: handleStartDateChange,\n    dateFormat: \"dd/MM/yyyy\",\n    maxDate: new Date(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"pointer calEndDateIcon\",\n    src: calenderImage,\n    alt: \"Calendar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filterAppointmentStart d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    className: \"datePicker-Input\",\n    placeholderText: \"End Date\",\n    selected: endDate,\n    onChange: handleEndDateChange,\n    dateFormat: \"dd/MM/yyyy\",\n    minDate: startDate,\n    maxDate: maxEndDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"pointer calEndDateIcon\",\n    src: calenderImage,\n    alt: \"Calendar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"ClearButton\",\n    style: {\n      color: 'white'\n    },\n    onClick: async () => {\n      // Clear all input fields and reset dates to today + 7 days for End Date\n      const todayDate = new Date();\n      setAddMobile('');\n      setMobileNo('');\n      setAddApplication('');\n      setApplicationNumber('');\n      setAddPolicy('');\n      setPolicyNumbers('');\n      setStartDate(todayDate);\n      setEndDate(moment(todayDate).add(7, 'days').toDate());\n      setMaxEndDate(moment(todayDate).add(7, 'days').toDate());\n\n      // Reset pagination and fetch fresh results (same as clicking search)\n      setOffsetHistory([0]);\n      setCurrentPage(1);\n      setHasNext(false);\n      setNextOffset(null);\n      await fetchCallRecords(0, todayDate, moment(todayDate).add(7, 'days').toDate());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 11\n    }\n  }, \"Clear\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"SearchIcon\",\n    onClick: searchOnClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: searchIcon,\n    alt: \"Search\",\n    height: \"20\",\n    width: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table1 table-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 9\n    }\n  }, renderTable()), data.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pagination-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"nav-button previousButtonLink\",\n    onClick: onPreviousClick,\n    disabled: offsetHistory.length <= 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 13\n    }\n  }, \"Previous\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"nav-button nextButtonLink\",\n    onClick: onNextClick,\n    disabled: !hasNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 13\n    }\n  }, \"Next\"))));\n};\nexport default Download_call_records;","map":{"version":3,"names":["moment","React","useEffect","useState","DatePicker","Dropdown","Textbox","Loader","calenderImage","callRecordAjax","CONSTANTS","handle_error","userAjax","Play","searchIcon","Download_call_records","loading","setLoading","data","setData","today","Date","startDate","setStartDate","endDate","setEndDate","add","toDate","maxEndDate","setMaxEndDate","limit","hasNext","setHasNext","nextOffset","setNextOffset","offsetHistory","setOffsetHistory","currentPage","setCurrentPage","mobileno","setMobileNo","applicationnumber","setApplicationNumber","policynumbers","setPolicyNumbers","callCenterDDData","setCallCenterDDData","callCenter","setCallCenter","addMobile","setAddMobile","addapplication","setAddApplication","addPolicy","setAddPolicy","isFetching","setIsFetching","fetchCallRecords","offsetParam","startOverride","endOverride","sDate","eDate","startD","format","endD","response","API_METHODS","GET","API","GET_PHONECALL_RECORDS","localStorage","getItem","id","status","STATUS","OK","searchOnClick","onNextClick","prev","onPreviousClick","length","newHistory","pop","previousOffset","handleStartDateChange","date","newMax","isBefore","isAfter","defaultEnd","handleEndDateChange","DownloadRecording","item","params","bucketName","s3RecordingBucketName","key","s3RecordingFilePath","DOWNLOAD_FILE","startDownload","url","fileName","fetch","blob","link","document","createElement","href","window","URL","createObjectURL","download","recordingFileName","click","renderTableRows","map","callId","__self","__source","_jsxFileName","lineNumber","columnNumber","className","groupName","calledNumber","applicationNo","policyNumber","callStartDate","callStartTime","callENDDate","callENDTime","onClick","src","alt","renderTable","Fragment","scope","type","styleClass","placeholder","value","onChange","e","target","style","width","placeholderText","selected","dateFormat","maxDate","minDate","color","todayDate","height","disabled"],"sources":["/Users/yashwadhwani/Downloads/new ui/hdfc-call-vault/src/pages/download_call_records.jsx"],"sourcesContent":["import moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport DatePicker from 'react-datepicker';\nimport Dropdown from '../components/common/download_call_dropdown';\nimport Textbox from '../components/common/download_call_textbox';\nimport Loader from '../components/common/loader';\nimport calenderImage from '../images/Icon metro-calendar.png';\nimport '../stylesheets/download_call_records.css';\nimport callRecordAjax from '../utils/callRecordAjax';\nimport CONSTANTS from '../utils/constants';\nimport handle_error from '../utils/handle';\nimport userAjax from '../utils/userAjax';\nimport Play from './../images/Icon ionic-ios-play-circle.svg';\nimport searchIcon from './../images/search-3-64.png';\n\nconst Download_call_records = () => {\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState([]);\n  const today = new Date();\n\n  const [startDate, setStartDate] = useState(today);\n  const [endDate, setEndDate] = useState(moment(today).add(7, 'days').toDate());\n  const [maxEndDate, setMaxEndDate] = useState(moment().add(7, 'days').toDate());\n\n  const [limit] = useState(10);\n  const [hasNext, setHasNext] = useState(false);\n  const [nextOffset, setNextOffset] = useState(null);\n  const [offsetHistory, setOffsetHistory] = useState([0]);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const [mobileno, setMobileNo] = useState('');\n  const [applicationnumber, setApplicationNumber] = useState('');\n  const [policynumbers, setPolicyNumbers] = useState('');\n\n  const [callCenterDDData, setCallCenterDDData] = useState([]);\n  const [callCenter, setCallCenter] = useState('');\n\n  const [addMobile, setAddMobile] = useState('');\n  const [addapplication, setAddApplication] = useState('');\n  const [addPolicy, setAddPolicy] = useState('');\n\n  const [isFetching, setIsFetching] = useState(false);\n\n  // ------------------ API Calls ------------------\n  // Now accepts optional overrides for start/end dates so callers can ensure\n  // the API uses the exact dates the user selected (avoids stale-setState race).\n  const fetchCallRecords = async (offsetParam = 0, startOverride = null, endOverride = null) => {\n    if (isFetching) return;\n    setIsFetching(true);\n    setLoading(true);\n\n    const sDate = startOverride || startDate;\n    const eDate = endOverride || endDate;\n\n    const startD = sDate ? moment(sDate).format('YYYY-MM-DD') : null;\n    const endD = eDate ? moment(eDate).format('YYYY-MM-DD') : null;\n\n    const response = await callRecordAjax(\n      CONSTANTS.API_METHODS.GET,\n      `${CONSTANTS.API.GET_PHONECALL_RECORDS}/${mobileno || 0}/${policynumbers || null}/${applicationnumber || null}/${localStorage.getItem('IS_ADMIN')}/${null}/${localStorage.getItem('USER_ID')}/${startD}/${endD}/${limit}/${offsetParam}/callStartDate/desc`,\n      {},\n      { id: localStorage.getItem('USER_ID') },\n      {}\n    );\n\n    if (response.status === CONSTANTS.STATUS.OK) {\n      setData([...response.data]);\n      setHasNext(response.hasNext || false);\n      setNextOffset(response.nextOffset || null);\n    } else {\n      setData([]);\n      setHasNext(false);\n      setNextOffset(null);\n    }\n\n    setLoading(false);\n    setIsFetching(false);\n  };\n\n  // ------------------ Pagination ------------------\n  const searchOnClick = async () => {\n    setOffsetHistory([0]);\n    setCurrentPage(1);\n    setHasNext(false);\n    setNextOffset(null);\n    await fetchCallRecords(0);\n  };\n\n  const onNextClick = async () => {\n    if (isFetching) return;\n    if (!hasNext || !nextOffset) return;\n    await fetchCallRecords(nextOffset);\n    setOffsetHistory((prev) => [...prev, nextOffset]);\n    setCurrentPage((prev) => prev + 1);\n  };\n\n  const onPreviousClick = async () => {\n    if (isFetching) return;\n    if (offsetHistory.length <= 1) return;\n\n    const newHistory = [...offsetHistory];\n    newHistory.pop();\n    const previousOffset = newHistory[newHistory.length - 1];\n\n    await fetchCallRecords(previousOffset);\n    setOffsetHistory(() => newHistory);\n    setCurrentPage((prev) => prev - 1);\n  };\n\n  // ------------------ Dates ------------------\n  const handleStartDateChange = (date) => {\n    // When start changes: set start, compute new maxEnd and default end\n    setStartDate(date);\n    const newMax = moment(date).add(7, 'days').toDate();\n    setMaxEndDate(newMax);\n\n    // If current endDate is before startDate or after newMax, reset it\n    if (!endDate || moment(endDate).isBefore(moment(date)) || moment(endDate).isAfter(moment(newMax))) {\n      const defaultEnd = newMax;\n      setEndDate(defaultEnd);\n      // Do NOT auto-run the API here — wait for user to pick end or click search.\n    }\n  };\n\n  // Important: use the selected `date` directly when calling the API to avoid\n  // race conditions where setState hasn't updated yet. We call fetchCallRecords\n  // with overrides so the API uses the exact selection the user made.\n  const handleEndDateChange = async (date) => {\n    setEndDate(date);\n    // Immediately run search using current startDate and the newly selected end date.\n    await fetchCallRecords(0, startDate, date);\n  };\n\n  // ------------------ Download ------------------\n  const DownloadRecording = async (item) => {\n    const params = {\n      bucketName: item.s3RecordingBucketName,\n      key: item.s3RecordingFilePath,\n    };\n    const response = await callRecordAjax(\n      CONSTANTS.API_METHODS.GET,\n      CONSTANTS.API.DOWNLOAD_FILE,\n      params,\n      { id: localStorage.getItem('USER_ID') },\n      {}\n    );\n\n    if (response.status === CONSTANTS.STATUS.OK) {\n      startDownload(response.data[0], item);\n    }\n  };\n\n  const startDownload = async (url, fileName) => {\n    const response = await fetch(url);\n    const blob = await response.blob();\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = fileName.recordingFileName;\n    link.click();\n  };\n\n  // ------------------ Effects ------------------\n  useEffect(() => {\n    // getCallCenterDropDownData();\n    fetchCallRecords(0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // ------------------ Table ------------------\n  const renderTableRows = () =>\n    data.map((item) => (\n      <tr key={item.callId}>\n        <td className=\"table-data\">{item.groupName}</td>\n        <td className=\"table-data\">{item.callId}</td>\n        <td className=\"table-data\">{item.recordingFileName}</td>\n        <td className=\"table-data\">{item.calledNumber}</td>\n        <td className=\"table-data\">{item.applicationNo}</td>\n        <td className=\"table-data\">{item.policyNumber}</td>\n        <td className=\"table-data\">\n          {item.callStartDate} {item.callStartTime}\n        </td>\n        <td className=\"table-data\">\n          {item.callENDDate} {item.callENDTime}\n        </td>\n        <td className=\"table-data\">\n          <div className=\"table-data-icon\">\n            <button\n              className=\"play pl-2\"\n              onClick={() => DownloadRecording(item)}\n            >\n              Recording\n              <img className=\"ml-1 playbutton\" src={Play} alt=\"Play\" />\n            </button>\n          </div>\n        </td>\n      </tr>\n    ));\n\n  const renderTable = () => (\n    <>\n      <table className=\"table table-bordered\">\n        <thead className=\"tablehead\">\n          <tr>\n            <th className=\"table-head\" scope=\"col\">Call Center</th>\n            <th className=\"table-head\" scope=\"col\">Call Id</th>\n            <th className=\"table-head\" scope=\"col\">File Name</th>\n            <th className=\"table-head\" scope=\"col\">Mobile No.</th>\n            <th className=\"table-head\" scope=\"col\">Application Number</th>\n            <th className=\"table-head\" scope=\"col\">Policy Number</th>\n            <th className=\"table-head\" scope=\"col\">Start Date & Time</th>\n            <th className=\"table-head\" scope=\"col\">End Date & Time</th>\n            <th className=\"table-head\" scope=\"col\">Recordings</th>\n          </tr>\n        </thead>\n        <tbody>{renderTableRows()}</tbody>\n      </table>\n      {!loading && data?.length === 0 && (\n        <div className=\"text-center\">No data found</div>\n      )}\n    </>\n  );\n\n  // ------------------ JSX ------------------\n  return (\n    <div className={`content ${loading ? 'loading-blur' : ''}`}>\n      {loading && <Loader />}\n      <div className=\"centre\">\n        <div className=\"headertag\"><b>Download Call Records</b></div>\n\n        <div className=\"headerline\">\n          <Textbox\n            type=\"number\"\n            styleClass=\"download-records-textbox\"\n            placeholder=\"Mobile No.\"\n            value={addMobile}\n            onChange={(e) => {\n              setMobileNo(e.target.value);\n              setAddMobile(e.target.value);\n            }}\n          />\n\n          <Textbox\n            type=\"number\"\n            styleClass=\"download-records-textbox\"\n            placeholder=\"Application No.\"\n            value={addapplication}\n            onChange={(e) => {\n              setApplicationNumber(e.target.value);\n              setAddApplication(e.target.value);\n            }}\n          />\n\n          <Textbox\n            type=\"number\"\n            styleClass=\"download-records-textbox\"\n            placeholder=\"Policy No.\"\n            value={addPolicy}\n            onChange={(e) => {\n              setPolicyNumbers(e.target.value);\n              setAddPolicy(e.target.value);\n            }}\n          />\n          <div style={{ width: '220px' }}></div>\n          <div className=\"filterContainer-dc\">\n            <div className=\"filterAppointmentStart d-flex\">\n              <DatePicker\n                className=\"datePicker-Input\"\n                placeholderText=\"Start Date\"\n                selected={startDate}\n                onChange={handleStartDateChange}\n                dateFormat=\"dd/MM/yyyy\"\n                maxDate={new Date()}\n              />\n              <img\n                className=\"pointer calEndDateIcon\"\n                src={calenderImage}\n                alt=\"Calendar\"\n              />\n            </div>\n\n            <div className=\"filterAppointmentStart d-flex\">\n              <DatePicker\n                className=\"datePicker-Input\"\n                placeholderText=\"End Date\"\n                selected={endDate}\n                onChange={handleEndDateChange}\n                dateFormat=\"dd/MM/yyyy\"\n                minDate={startDate}\n                maxDate={maxEndDate}\n              />\n              <img\n                className=\"pointer calEndDateIcon\"\n                src={calenderImage}\n                alt=\"Calendar\"\n              />\n            </div>\n          </div>\n\n          <button\n            className=\"ClearButton\"\n            style={{ color: 'white' }}\n            onClick={async () => {\n              // Clear all input fields and reset dates to today + 7 days for End Date\n              const todayDate = new Date();\n              setAddMobile('');\n              setMobileNo('');\n              setAddApplication('');\n              setApplicationNumber('');\n              setAddPolicy('');\n              setPolicyNumbers('');\n\n              setStartDate(todayDate);\n              setEndDate(moment(todayDate).add(7, 'days').toDate());\n              setMaxEndDate(moment(todayDate).add(7, 'days').toDate());\n\n              // Reset pagination and fetch fresh results (same as clicking search)\n              setOffsetHistory([0]);\n              setCurrentPage(1);\n              setHasNext(false);\n              setNextOffset(null);\n\n              await fetchCallRecords(0, todayDate, moment(todayDate).add(7, 'days').toDate());\n            }}\n          >\n            Clear\n          </button>\n\n          <button className=\"SearchIcon\" onClick={searchOnClick}>\n            <img src={searchIcon} alt=\"Search\" height=\"20\" width=\"20\" />\n          </button>\n        </div>\n\n        <div className=\"table1 table-responsive\">{renderTable()}</div>\n\n        {data.length > 0 && (\n          <div className=\"pagination-container\">\n            <button\n              className=\"nav-button previousButtonLink\"\n              onClick={onPreviousClick}\n              disabled={offsetHistory.length <= 1}\n            >\n              Previous\n            </button>\n            <button\n              className=\"nav-button nextButtonLink\"\n              onClick={onNextClick}\n              disabled={!hasNext}\n            >\n              Next\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Download_call_records;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}